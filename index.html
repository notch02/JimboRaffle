<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Create and join decentralized raffles on Solana blockchain. Fair, transparent, and secure.">
    <title>JimboRaffle - Solana Raffle dApp</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="logo.png">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <img src="logo.png" alt="JimboRaffle Logo" class="logo">
                    <span class="logo-text">JimboRaffle</span>
                </div>
                <button id="walletButton" class="btn btn-primary">Connect Wallet</button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero section">
        <div class="container">
            <h1>Decentralized Raffles on Solana</h1>
            <p>Create custom raffles, invite friends, and win big. Powered by Solana blockchain for transparency and
                fairness.</p>
            <div class="hero-cta">
                <a href="#create-raffle" class="btn btn-primary">Create Raffle</a>
                <a href="#public-raffles" class="btn btn-secondary">Browse Raffles</a>
                <a href="#how-it-works" class="btn btn-secondary">How It Works</a>
            </div>
        </div>
    </section>

    <!-- Create Raffle Section -->
    <section id="create-raffle" class="section">
        <div class="container">
            <h2 class="text-center mb-2">Create Your Raffle</h2>
            <p class="text-center text-secondary mb-2">Set up a custom raffle with your own rules</p>

            <div class="card" style="max-width: 600px; margin: 0 auto;">
                <form id="createRaffleForm">
                    <div class="form-group">
                        <label class="form-label">Ticket Price (SOL)</label>
                        <input type="number" step="0.001" min="0.001" class="form-input" id="ticketPrice"
                            placeholder="0.1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Number of Tickets</label>
                        <input type="number" min="2" max="1000" class="form-input" id="totalTickets" placeholder="100"
                            required>
                    </div>

                    <div class="form-group">
                        <label class="form-checkbox">
                            <input type="checkbox" id="isPrivate">
                            <span>Make this raffle private (requires invite code)</span>
                        </label>
                    </div>

                    <div class="form-group hidden" id="inviteCodeGroup">
                        <label class="form-label">Invite Code (will be generated)</label>
                        <input type="text" class="form-input" id="inviteCodeDisplay" readonly>
                    </div>

                    <div class="alert alert-info">
                        <strong>Prize Pool:</strong> <span id="prizePoolPreview">0</span> SOL<br>
                        <strong>Winner receives:</strong> <span id="winnerPrizePreview">0</span> SOL (93%)<br>
                        <strong>Platform fee:</strong> <span id="platformFeePreview">0</span> SOL (7%)
                    </div>

                    <button type="submit" class="btn btn-primary" style="width: 100%;">Create Raffle</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Public Raffles Section -->
    <section id="public-raffles" class="section">
        <div class="container">
            <h2 class="text-center mb-2">Active Public Raffles</h2>
            <p class="text-center text-secondary mb-2">Join any raffle and try your luck!</p>

            <div id="publicRafflesGrid" class="grid grid-3">
                <div class="card text-center" style="grid-column: 1 / -1;">
                    <div class="spinner"></div>
                    <p class="loading-text">Loading raffles...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Join Private Raffle Section -->
    <section id="join-private" class="section">
        <div class="container">
            <h2 class="text-center mb-2">Join Private Raffle</h2>
            <p class="text-center text-secondary mb-2">Have an invite code? Enter it here</p>

            <div class="card" style="max-width: 500px; margin: 0 auto;">
                <form id="joinPrivateForm">
                    <div class="form-group">
                        <label class="form-label">Invite Code</label>
                        <input type="text" class="form-input" id="privateInviteCode" placeholder="Enter invite code"
                            required>
                    </div>

                    <button type="submit" class="btn btn-success" style="width: 100%;">Find Raffle</button>
                </form>

                <div id="privateRaffleResult" class="hidden mt-2"></div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="section"
        style="background: linear-gradient(180deg, rgba(153, 69, 255, 0.05) 0%, rgba(0, 212, 255, 0.05) 100%);">
        <div class="container">
            <h2 class="text-center mb-2">How It Works</h2>
            <p class="text-center text-secondary mb-2" style="max-width: 700px; margin: 0 auto 3rem;">Transparent, fair,
                and secure raffles powered by Solana blockchain. Every step is verifiable on-chain.</p>

            <div class="how-it-works-grid">
                <div class="how-step">
                    <div class="step-icon">1</div>
                    <h3>Create or Join</h3>
                    <p>Create a raffle with custom ticket price and quantity, or browse public raffles. Private raffles
                        require an invite code.</p>
                </div>

                <div class="how-step">
                    <div class="step-icon">2</div>
                    <h3>Buy Tickets</h3>
                    <p>Connect your wallet and purchase tickets with SOL. All payments are processed instantly on-chain.
                    </p>
                </div>

                <div class="how-step">
                    <div class="step-icon">3</div>
                    <h3>Automatic Draw</h3>
                    <p>When all tickets are sold, a random winner is selected automatically using provably fair on-chain
                        randomness.</p>
                </div>

                <div class="how-step">
                    <div class="step-icon">4</div>
                    <h3>Instant Payout</h3>
                    <p>Winner receives 93% of the prize pool instantly. 7% goes to platform maintenance.</p>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="card" style="margin-top: 4rem;">
                <h3 class="text-center mb-2">üîê Fairness & Security</h3>

                <div class="technical-details">
                    <div class="tech-section">
                        <h4>Random Number Generation</h4>
                        <p>We use Solana's slot hash combined with raffle data for truly random winner selection:</p>
                        <div class="code-snippet">
                            random_seed = slot √ó participants + prize_pool<br>
                            winner_index = random_seed % total_participants
                        </div>
                        <p class="text-muted">The slot hash is determined by Solana validators, making it impossible to
                            predict or manipulate.</p>
                    </div>

                    <div class="tech-section">
                        <h4>Smart Contract Security</h4>
                        <ul class="check-list">
                            <li>‚úÖ Immutable logic - rules cannot be changed after deployment</li>
                            <li>‚úÖ Transparent execution - all transactions visible on Solana Explorer</li>
                            <li>‚úÖ Atomic operations - winner selection and payout in single transaction</li>
                            <li>‚úÖ No admin control - platform cannot interfere with active raffles</li>
                        </ul>
                    </div>

                    <div class="tech-section">
                        <h4>Prize Distribution</h4>
                        <div class="distribution-visual">
                            <div class="dist-bar">
                                <div class="dist-winner" style="width: 93%;">
                                    <span>Winner: 93%</span>
                                </div>
                                <div class="dist-platform" style="width: 7%;">
                                    <span>Platform: 7%</span>
                                </div>
                            </div>
                        </div>
                        <p class="text-muted mt-1">Example: 100 SOL prize ‚Üí Winner gets 93 SOL, Platform gets 7 SOL</p>
                    </div>

                    <div class="tech-section">
                        <h4>Blockchain Verification</h4>
                        <p>Every action is recorded and verifiable:</p>
                        <ul class="check-list">
                            <li>üîç Raffle creation transaction</li>
                            <li>üîç Each ticket purchase</li>
                            <li>üîç Winner selection</li>
                            <li>üîç Prize distribution</li>
                        </ul>
                        <p class="text-muted">Verify any raffle on <a href="https://explorer.solana.com" target="_blank"
                                class="text-gradient">Solana Explorer</a></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- My Raffles Section -->
    <section id="my-raffles" class="section">
        <div class="container">
            <h2 class="text-center mb-2">My Raffles</h2>
            <p class="text-center text-secondary mb-2">Raffles you created or participated in</p>

            <div id="myRafflesGrid" class="grid grid-3">
                <div class="card text-center" style="grid-column: 1 / -1;">
                    <p class="text-secondary">Connect your wallet to view your raffles</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" class="footer-link">About</a>
                    <a href="#how-it-works" class="footer-link">How It Works</a>
                    <a href="#" class="footer-link">FAQ</a>
                    <a href="https://solana.com" target="_blank" class="footer-link">Solana</a>
                </div>
                <p class="footer-text">Built on Solana ‚Ä¢ Powered by Web3 ‚Ä¢ 7% Platform Fee</p>
                <p class="footer-text">&copy; 2025 JimboRaffle. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Raffle Detail Modal -->
    <div id="raffleModal" class="modal">
        <div class="modal-content">
            <div class="form-group">
                <label class="form-label">Number of Tickets</label>
                <input type="number" min="2" max="1000" class="form-input" id="totalTickets" placeholder="100" required>
            </div>

            <div class="form-group">
                <label class="form-checkbox">
                    <input type="checkbox" id="isPrivate">
                    <span>Make this raffle private (requires invite code)</span>
                </label>
            </div>

            <div class="form-group hidden" id="inviteCodeGroup">
                <label class="form-label">Invite Code (will be generated)</label>
                <input type="text" class="form-input" id="inviteCodeDisplay" readonly>
            </div>

            <div class="alert alert-info">
                <strong>Prize Pool:</strong> <span id="prizePoolPreview">0</span> SOL<br>
                <strong>Winner receives:</strong> <span id="winnerPrizePreview">0</span> SOL (93%)<br>
                <strong>Platform fee:</strong> <span id="platformFeePreview">0</span> SOL (7%)
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">Create Raffle</button>
            </form>
        </div>
    </div>
    </section>

    <!-- Public Raffles Section -->
    <section id="public-raffles" class="section">
        <div class="container">
            <h2 class="text-center mb-2">Active Public Raffles</h2>
            <p class="text-center text-secondary mb-2">Join any raffle and try your luck!</p>

            <div id="publicRafflesGrid" class="grid grid-3">
                <div class="card text-center" style="grid-column: 1 / -1;">
                    <div class="spinner"></div>
                    <p class="loading-text">Loading raffles...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Join Private Raffle Section -->
    <section id="join-private" class="section">
        <div class="container">
            <h2 class="text-center mb-2">Join Private Raffle</h2>
            <p class="text-center text-secondary mb-2">Have an invite code? Enter it here</p>

            <div class="card" style="max-width: 500px; margin: 0 auto;">
                <form id="joinPrivateForm">
                    <div class="form-group">
                        <label class="form-label">Invite Code</label>
                        <input type="text" class="form-input" id="privateInviteCode" placeholder="Enter invite code"
                            required>
                    </div>

                    <button type="submit" class="btn btn-success" style="width: 100%;">Find Raffle</button>
                </form>

                <div id="privateRaffleResult" class="hidden mt-2"></div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="section"
        style="background: linear-gradient(180deg, rgba(153, 69, 255, 0.05) 0%, rgba(0, 212, 255, 0.05) 100%);">
        <div class="container">
            <h2 class="text-center mb-2">How It Works</h2>
            <p class="text-center text-secondary mb-2" style="max-width: 700px; margin: 0 auto 3rem;">Transparent, fair,
                and secure raffles powered by Solana blockchain. Every step is verifiable on-chain.</p>

            <div class="how-it-works-grid">
                <div class="how-step">
                    <div class="step-icon">1</div>
                    <h3>Create or Join</h3>
                    <p>Create a raffle with custom ticket price and quantity, or browse public raffles. Private raffles
                        require an invite code.</p>
                </div>

                <div class="how-step">
                    <div class="step-icon">2</div>
                    <h3>Buy Tickets</h3>
                    <p>Connect your wallet and purchase tickets with SOL. All payments are processed instantly on-chain.
                    </p>
                </div>

                <div class="how-step">
                    <div class="step-icon">3</div>
                    <h3>Automatic Draw</h3>
                    <p>When all tickets are sold, a random winner is selected automatically using provably fair on-chain
                        randomness.</p>
                </div>

                <div class="how-step">
                    <div class="step-icon">4</div>
                    <h3>Instant Payout</h3>
                    <p>Winner receives 93% of the prize pool instantly. 7% goes to platform maintenance.</p>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="card" style="margin-top: 4rem;">
                <h3 class="text-center mb-2">üîê Fairness & Security</h3>

                <div class="technical-details">
                    <div class="tech-section">
                        <h4>Random Number Generation</h4>
                        <p>We use Solana's slot hash combined with raffle data for truly random winner selection:</p>
                        <div class="code-snippet">
                            random_seed = slot √ó participants + prize_pool<br>
                            winner_index = random_seed % total_participants
                        </div>
                        <p class="text-muted">The slot hash is determined by Solana validators, making it impossible to
                            predict or manipulate.</p>
                    </div>

                    <div class="tech-section">
                        <h4>Smart Contract Security</h4>
                        <ul class="check-list">
                            <li>‚úÖ Immutable logic - rules cannot be changed after deployment</li>
                            <li>‚úÖ Transparent execution - all transactions visible on Solana Explorer</li>
                            <li>‚úÖ Atomic operations - winner selection and payout in single transaction</li>
                            <li>‚úÖ No admin control - platform cannot interfere with active raffles</li>
                        </ul>
                    </div>

                    <div class="tech-section">
                        <h4>Prize Distribution</h4>
                        <div class="distribution-visual">
                            <div class="dist-bar">
                                <div class="dist-winner" style="width: 93%;">
                                    <span>Winner: 93%</span>
                                </div>
                                <div class="dist-platform" style="width: 7%;">
                                    <span>Platform: 7%</span>
                                </div>
                            </div>
                        </div>
                        <p class="text-muted mt-1">Example: 100 SOL prize ‚Üí Winner gets 93 SOL, Platform gets 7 SOL</p>
                    </div>

                    <div class="tech-section">
                        <h4>Blockchain Verification</h4>
                        <p>Every action is recorded and verifiable:</p>
                        <ul class="check-list">
                            <li>üîç Raffle creation transaction</li>
                            <li>üîç Each ticket purchase</li>
                            <li>üîç Winner selection</li>
                            <li>üîç Prize distribution</li>
                        </ul>
                        <p class="text-muted">Verify any raffle on <a href="https://explorer.solana.com" target="_blank"
                                class="text-gradient">Solana Explorer</a></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- My Raffles Section -->
    <section id="my-raffles" class="section">
        <div class="container">
            <h2 class="text-center mb-2">My Raffles</h2>
            <p class="text-center text-secondary mb-2">Raffles you created or participated in</p>

            <div id="myRafflesGrid" class="grid grid-3">
                <div class="card text-center" style="grid-column: 1 / -1;">
                    <p class="text-secondary">Connect your wallet to view your raffles</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" class="footer-link">About</a>
                    <a href="#how-it-works" class="footer-link">How It Works</a>
                    <a href="#" class="footer-link">FAQ</a>
                    <a href="https://solana.com" target="_blank" class="footer-link">Solana</a>
                </div>
                <p class="footer-text">Built on Solana ‚Ä¢ Powered by Web3 ‚Ä¢ 7% Platform Fee</p>
                <p class="footer-text">&copy; 2025 JimboRaffle. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Raffle Detail Modal -->
    <div id="raffleModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeRaffleModal()">&times;</button>
            <div id="raffleModalContent"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script type="module" src="borsh.js"></script>
    <script type="module" src="scripts.js"></script>
</body>

</html>